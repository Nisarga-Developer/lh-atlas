<html>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,700,900" rel="stylesheet">
    
    <head>
        <style>
            
            body {
                margin: 0;
                overflow: hidden;
            }
            
            .nav-wrapper {
                background-color: rgba(0,0,0,0.2);
                height: 10vh;
                position: fixed;
                width: 100vw;
                line-height: 10vh;
                z-index: 10;
                transition: background 0.2s;
            }
            
            .nav-wrapper .brand-logo {
                filter: brightness(1000%);
                height: 8vh;
                margin-top: 1vh;
                margin-left: 2vw;
            }
            
            .nav-wrapper .menu_items_li {
                display: inline-block;
                margin-left: 1vw;
                margin-right: 1vw;
                padding-left: 2vw;
                padding-right: 2vw;
                border-radius: 3600px;
                transition: background 0.2s;
                transition: border 0.2s;
                cursor: pointer;
            }
            
            .nav-wrapper li a i {
                vertical-align: middle;
            }
            
            
            .nav-wrapper a {
                color: #FFF;
                font-size: 16px;
            }
            
            .nav-wrapper ul {
                line-height: 5vh;
            }
            
            #map {
                height: 100vh;
                width: 100vw;
            }
            
            #legend {
                width: 20vw;
                height: 50vh;
                position: absolute;
                top: 30vh;
                right: 4vw;
                background-color: #FFF;
                border-radius: 2px;
                z-index: 100;
                box-shadow: 0 2px 6px rgba(0,0,0,0.2);
                padding: 3vw;
                display: none;
            }
            
            #legend h1 {
                margin: auto;
                font-size: 24px;
                color: #666;                
            }
            
            .content {
            width: 400px;
            height: 250px;
            margin: 0;
            padding: 20px;
        }
        
            .content .header {
            width: 100%;
            height: 50px;
            padding: 0;
            margin: 0;
        }
        
        .content .header .event, .content .header .ehr, .content .header .toolkit, .content .header .radiology  {
            margin: 0;
            padding: 0;
            font-size: 20px;
            }
            
            .content .header .event {
                color: #CC0000;
            }
            
            .content .header .ehr {
                color: #219653;
            }
            
            .content .header .toolkit {
                color: #F2994A;
            }
            
            .content .header .radiology {
                color: #2F80ED;
            }
            
            .content .header .name {
                font-size: 18px;
                color: #666;
            }
            
            .content .header .version {
                font-size: 12px;
                color: #666;
            }
            
            .modal-content .encounters {
                background-color: #EEE;
                border-radius: 2px;
                width: 80%;
                height: 200px;
                overflow-y: scroll;
                padding: 20px;
                padding-bottom: 0;
            }
            
            .modal-content #encounters_title {
                font-size: 20px;
                color: #666;
                display: none;
            }
            
            .modal-content #encounters_item {
                font-size: 16px;
                color: #666;
                width: 100%;
                height: 30px;
                line-height: 30px;
            }
            
            .modal-content #encounters_none {
                font-size: 20px;
                color: #AAA;
                text-align: center;
                width: 100%;
            }
            
            .modal-content #name {
                font-size: 20px;
            }
            
            .modal-content #email, .modal-content #phone {
                font-size: 16px;
                color: #999;
            }
            
            .modal-content #email i, .modal-content #phone i {
                vertical-align: middle;
            }
            
            .modal-content #version {
                font-size: 12px;
                color: #AAA;
            }
            
            .modal-content #desc {
                font-size: 15px;
                color: #666;
                display: none;
            }
            
            
        </style>
    </head>
    <body>
        <div class="nav-wrapper">
            <a href="index.html"><img src="logo.png" class="brand-logo"></a>
            <ul id="nav-mobile" class="right hide-on-small-only">
                <li class="menu_items_li" onclick="toggleLegend()"><a class="menu_items tooltipped" data-position="bottom" data-delay="50" data-tooltip="View legend"><i class="material-icons">info</i></a></li>
                <li class="menu_items_li"><a class="menu_items tooltipped" data-position="bottom" data-delay="50" data-tooltip="Help"><i class="material-icons">help</i></a></li>
                <li class="menu_items_li"><a class="menu_items"><i class="material-icons dropdown-button" data-activates='dropdown1'>more_vert</i></a></li>
            </ul>
        </div>
        
        <div id="legend">
            <h1>Legend</h1>
            <p><img src="ehr.png">&nbsp;LibreHealth EHR</p>
            <p><img src="toolkit.png">&nbsp;LibreHealth Toolkit</p>
            <p><img src="radiology.png">&nbsp;LibreHealth Radiology</p>
            <p><img src="event.png">&nbsp;Events</p>
        </div>
        <div id="map"></div>
        
         <!-- Modal Trigger -->
        <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>

        <!-- Modal Structure -->
        <div id="modal1" class="modal">
            <div class="modal-content">
                <h4 id="type">Type</h4>
                <p id="name">Name</p>
                <div class="encounters">
                    <p id="encounters_title">Previous encounters</p>
                    <div class="encounters_wrapper">
                    </div>
                    <p id="encounters_none"><i class="material-icons">sentiment_neutral</i><br>No past encounters</p>
                </div>
                
                <p id="email"><i class="material-icons">mail_outline</i>blah@blah.com</p>
                <p id="phone"><i class="material-icons">phone</i>000-932-2039</p>
                <p id="desc"></p>
                <p id="version">Using version</p>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect btn-flat">CLOSE</a>
            </div>
        </div>
        

  <!-- Dropdown Structure -->
  <ul id='dropdown1' class='dropdown-content'>
    <li><a href="#!">Download all data as JSON</a></li>
    <li><a href="#!">Search</a></li>
  </ul>
        <script>
            
           var listOfMarkers = JSON.parse('[{"type":"event", "name":"Ebola Outbreak", "location":"Nigeria", "coords":{"lat": -25.363, "lng": 131.044}},{"type":"ehr", "name":"John Doe", "location":"USA", "coords":{"lat": -22.363, "lng": 111.044}, "version":"1.2","contactDetails":"john@doe.com"},{"type":"toolkit", "name":"EME Clinic", "location":"Australia", "coords":{"lat": -22.363, "lng": 121.044}, "version":"1.1", "contactDetails":"eme.clinic.com"},{"type":"radiology", "name":"EDSRE Hospitals", "location":"Australia", "coords":{"lat": -20.363, "lng": 111.044}, "version":"1.5", "contactDetails":"edsre.com"}]');
            
            
            function initMap() {
                var lightMap = new google.maps.StyledMapType(
            [
  {
    "featureType": "administrative.neighborhood",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi.business",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.local",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "transit",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  }
],
            {name: 'Light Map'});
                
                var darkMap = new google.maps.StyledMapType(
            [
  {
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#1d2c4d"
      }
    ]
  },
  {
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#8ec3b9"
      }
    ]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#1a3646"
      }
    ]
  },
  {
    "featureType": "administrative.country",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#4b6878"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#64779e"
      }
    ]
  },
  {
    "featureType": "administrative.neighborhood",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "administrative.province",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#4b6878"
      }
    ]
  },
  {
    "featureType": "landscape.man_made",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#334e87"
      }
    ]
  },
  {
    "featureType": "landscape.natural",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#023e58"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#283d6a"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#6f9ba5"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#1d2c4d"
      }
    ]
  },
  {
    "featureType": "poi.business",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#023e58"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#3C7680"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#304a7d"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#98a5be"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#1d2c4d"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#2c6675"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#255763"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#b0d5ce"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#023e58"
      }
    ]
  },
  {
    "featureType": "road.local",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "transit",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "transit",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#98a5be"
      }
    ]
  },
  {
    "featureType": "transit",
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#1d2c4d"
      }
    ]
  },
  {
    "featureType": "transit.line",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#283d6a"
      }
    ]
  },
  {
    "featureType": "transit.station",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#3a4762"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#0e1626"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#4e6d70"
      }
    ]
  }
],
            {name: 'Dark Map'});

        // Create a map object, and include the MapTypeId to add
        // to the map type control.
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -25.363, lng: 131.044},
          zoom: 3,
          mapTypeControlOptions: {
            mapTypeIds: ['roadmap', 'satellite', 'hybrid', 'terrain',
                    'styled_map']
          },
            mapTypeControl: false,
          mapTypeControlOptions: {
              style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
              position: google.maps.ControlPosition.TOP_CENTER
          },
          zoomControl: true,
          zoomControlOptions: {
              position: google.maps.ControlPosition.LEFT_BOTTOM
          },
          scaleControl: true,
          streetViewControl: true,
          streetViewControlOptions: {
              position: google.maps.ControlPosition.LEFT_TOP
          },
          fullscreenControl: false,
            streetViewControl: false,
        });
                
            var currentOpenInfoBox;
                firebase.database().ref('lh-atlas').once('value').then(function(snapshot) {
                snapshot.forEach(function(marker) {                    
                    var markerIcon, i=0;
                    if(marker.val().type == "ehr") {
                        markerIcon = "ehr.png";
                        var popup = 
                            '<div class="content">'+
                            '<div class="header">'+
                            '<h1 class="ehr">EHR User</h1>'+
                            '<p class="name">' + marker.val().name + '</p>'+
                            '<p class="version">Version ' + marker.val().version + '</p>'+
                            '<p class="location">' + marker.val().location + '</p>'+
                            '<p class="contact">Contact at: ' + marker.val().contactEmail + '</p>'+
                            '<a class="btn-flat waves-effect" onclick="moreDetails(\'' + marker.val().name + '\')\">MORE INFO</a>'+
                            '</div>'+
                            '</div>';
                    } else if (marker.val().type == "toolkit") {
                        markerIcon = "toolkit.png";
                        var popup = 
                            '<div class="content">'+
                            '<div class="header">'+
                            '<h1 class="toolkit">Toolkit User</h1>'+
                            '<p class="name">' + marker.val().name + '</p>'+
                            '<p class="version">Version ' + marker.val().version + '</p>'+
                            '<p class="location">' + marker.val().location + '</p>'+
                            '<p class="contact">Contact at: ' + marker.val().contactEmail + '</p>'+
                            '<a class="btn-flat waves-effect" onclick="moreDetails(\'' + marker.val().name + '\')\">MORE INFO</a>'+
                            '</div>'+
                            '</div>';
                        
                    } else if (marker.val().type == "radiology") {
                        markerIcon = "radiology.png";
                        var popup = 
                            '<div class="content">'+
                            '<div class="header">'+
                            '<h1 class="radiology">Radiology User</h1>'+
                            '<p class="name">' + marker.val().name + '</p>'+
                            '<p class="version">Version ' + marker.val().version + '</p>'+
                            '<p class="location">' + marker.val().location + '</p>'+
                            '<p class="contact">Contact at: ' + marker.val().contactEmail + '</p>'+
                            '<a class="btn-flat waves-effect" onclick="moreDetails(\'' + marker.val().name + '\')\">MORE INFO</a>'+
                            '</div>'+
                            '</div>';
                    } else if (marker.val().type == "event") {
                        markerIcon = "event.png";
                        var popup = 
                            '<div class="content">'+
                            '<div class="header">'+
                            '<h1 class="event">Event</h1>'+
                            '<p class="name">' + marker.val().name + '</p>'+
                            '<p class="location">' + marker.val().location + '</p>'+
                            '<a class="btn-flat waves-effect" onclick="moreDetails(\'' + marker.val().name + '\')\">MORE INFO</a>'+
                            '</div>'+
                            '</div>';
                    }
                    var cmd = "var marker"+i+" = new google.maps.Marker({"+
                   "     position: JSON.parse(marker.val().coords),"+
                   "     map: map,"+
                   "     icon: markerIcon"+
                   " });"+
                    
                   " marker"+i+".addListener('click', function() {"+
                   "     infowindow"+i+".open(map, marker"+i+");"+
                   "     if(currentOpenInfoBox!=undefined)currentOpenInfoBox.close();"+
                   "     currentOpenInfoBox = infowindow"+i+";"+
                   " });"+
                   " "+
                   " var infowindow"+i+" = new google.maps.InfoWindow({"+
                   "     content: popup"+
                   " });";
                    
                    eval(cmd);
                    i++;
                });
            });
                 //Associate the styled map with the MapTypeId and set it to display.
                
                var date = new Date();
                if(date.getHours() > 19) {
                    map.mapTypes.set('styled_map', darkMap);
                } else {
                    map.mapTypes.set('styled_map', lightMap);
                }
                
                map.setMapTypeId('styled_map');
            }
        

           
                
                
        </script>
        <script src="https://www.gstatic.com/firebasejs/4.8.2/firebase.js"></script>

        <script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDRxNTvFO62jOQTxG5Th8-AN81xmUc7pAo",
    authDomain: "extensions-3caad.firebaseapp.com",
    databaseURL: "https://extensions-3caad.firebaseio.com",
    projectId: "extensions-3caad",
    storageBucket: "extensions-3caad.appspot.com",
    messagingSenderId: "492740598517"
  };
  firebase.initializeApp(config);
</script>
        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCtWx6OHj2oMjdktQr8RZgkT5znkwziASM&callback=initMap">
        </script>
        
        <script>
            var legendVisible = false;
            function toggleLegend() {
                if(legendVisible) {
                    document.getElementById("legend").style.display = "none";
                    legendVisible = false;
                } else {
                    document.getElementById("legend").style.display = "block";
                    legendVisible = true;
                }
            }
            
            var database = firebase.database();
            function addEntry(type, name, location, coords, contactEmail, contactPhone, version, encounters) {
                firebase.database().ref('lh-atlas/' + name).set({
                    type: type,
                    location: location,
                    coords: coords,
                    contactEmail: contactEmail,
                    contactPhone: contactPhone,
                    version: version,
                    name: name,
                    encounters: encounters,
                    lastUpdated: Date()
                });
            }
            
            function addEventEntry(type, name, location, coords, desc) {
                firebase.database().ref('lh-atlas/' + name).set({
                    type: type,
                    location: location,
                    coords: coords,
                    description: desc,
                    lastUpdated: Date(),
                    name: name
                });
            }
            addEntry("ehr", "Arthur Radisson", "Birmingham", '{"lat": -22.393, "lng": 151.044}', "eme@aa.com", "000-323-4918", "1.2", '[{"date":"22/1/2018", "name":"Checkup"}, {"date":"24/1/2018", "name":"XRay"}]');
            
            addEntry("toolkit", "KJH Health", "Australia", '{"lat": -27.393, "lng": 131.044}', "jj@kekeke.com", "(+44)730-152-9813", "1.2", '[{"date":"12/1/2018", "name":"Routine"}]'); 
            
            addEventEntry("event", "Plague", "NZ", '{"lat": -24.393, "lng": 111.044}', "(This is the desc)<br>Plague! Run! Danger!");
            
            $(document).ready(function(){
                // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
                $('.modal').modal();
                $('.dropdown-button').dropdown({
                    inDuration: 300,
                    outDuration: 225,
                    constrainWidth: false, // Does not change width of dropdown to that of the activator
                    hover: false, // Activate on hover
                    gutter: 0, // Spacing from edge
                    belowOrigin: false, // Displays dropdown below the button
                    alignment: 'left', // Displays dropdown with edge aligned to the left of button
                    stopPropagation: false // Stops event propagation
                }
                                              );
            });
            function moreDetails(name) {
                firebase.database().ref('lh-atlas/' + name).once('value').then(function(snapshot) {  
                    
                        if(snapshot.val().type == "ehr") {
                            
                            document.getElementById("email").style.display = "block";
                            document.getElementById("phone").style.display = "block";
                            document.getElementsByClassName("encounters")[0].style.display = "block";
                            document.getElementById("desc").style.display = "none";
                            
                            //type of data
                            document.getElementById("type").innerHTML = "EHR User";
                            document.getElementById("type").style.color = "#219653";
                            
                            //name of user
                            document.getElementById("name").innerHTML = snapshot.val().name;
                            
                            //adding encounters
                            while ((document.getElementsByClassName("encounters_wrapper")[0].firstChild)) {
                                document.getElementsByClassName("encounters_wrapper")[0].removeChild(document.getElementsByClassName("encounters_wrapper")[0].firstChild);
                            }
                            
                            if((snapshot.val().encounters).length == 0) {
                                document.getElementById("encounters_title").style.display = "none";
                            } else {
                                
                                var encounters = JSON.parse(snapshot.val().encounters);
                                document.getElementById("encounters_title").style.display = "block";
                                
                                for(var i=0;i< encounters.length; i++) {
                                    var item = document.createElement("P");
                                    item.setAttribute("class", "encounters_item");
                                    
                                    var text = document.createTextNode(encounters[i].name + " on " + encounters[i].date);
                                    item.appendChild(text);
                                    document.getElementsByClassName("encounters_wrapper")[0].appendChild(item);
                                    
                                    document.getElementById("encounters_none").style.display = "none";
                                    
                                }
                            }
                            
                            document.getElementById("email").innerHTML = "<i class=\"material-icons\">mail_outline</i>&nbsp;" + snapshot.val().contactEmail;
                            
                            document.getElementById("phone").innerHTML = "<i class=\"material-icons\">phone</i>&nbsp;" + snapshot.val().contactPhone;
                            
                            document.getElementById("version").innerHTML = "Using version " + snapshot.val().version + "<br>Last updated on " + snapshot.val().lastUpdated;
                            
                            
                        } else if(snapshot.val().type == "toolkit") {
                            
                            document.getElementById("email").style.display = "block";
                            document.getElementById("phone").style.display = "block";
                            document.getElementsByClassName("encounters")[0].style.display = "block";
                            document.getElementById("desc").style.display = "none";
                            
                            document.getElementById("type").innerHTML = "Toolkit User";
                            document.getElementById("type").style.color = "#F2994A";
                            
                            //name of user
                            document.getElementById("name").innerHTML = snapshot.val().name;
                            
                            //adding encounters
                            while ((document.getElementsByClassName("encounters_wrapper")[0].firstChild)) {
                                document.getElementsByClassName("encounters_wrapper")[0].removeChild(document.getElementsByClassName("encounters_wrapper")[0].firstChild);
                            }
                            
                            if((snapshot.val().encounters).length == 0) {
                                document.getElementById("encounters_title").style.display = "none";
                            } else {
                                
                                var encounters = JSON.parse(snapshot.val().encounters);
                                document.getElementById("encounters_title").style.display = "block";
                                
                                for(var i=0;i< encounters.length; i++) {
                                    var item = document.createElement("P");
                                    item.setAttribute("class", "encounters_item");
                                    
                                    var text = document.createTextNode(encounters[i].name + " on " + encounters[i].date);
                                    item.appendChild(text);
                                    document.getElementsByClassName("encounters_wrapper")[0].appendChild(item);
                                    
                                    document.getElementById("encounters_none").style.display = "none";
                                    
                                }
                            }
                            
                            document.getElementById("email").innerHTML = "<i class=\"material-icons\">mail_outline</i>&nbsp;" + snapshot.val().contactEmail;
                            
                            document.getElementById("phone").innerHTML = "<i class=\"material-icons\">phone</i>&nbsp;" + snapshot.val().contactPhone;
                            
                            document.getElementById("version").innerHTML = "Using version " + snapshot.val().version + "<br>Last updated on " + snapshot.val().lastUpdated;
                            
                        } else if(snapshot.val().type == "radiology") {
                            
                            document.getElementById("email").style.display = "block";
                            document.getElementById("phone").style.display = "block";
                            document.getElementsByClassName("encounters")[0].style.display = "block";
                            document.getElementById("desc").style.display = "none";
                            
                            document.getElementById("type").innerHTML = "Radiology User";
                            document.getElementById("type").style.color = "#2F80ED";
                            
                            //name of user
                            document.getElementById("name").innerHTML = snapshot.val().name;
                            
                            //adding encounters
                            while ((document.getElementsByClassName("encounters_wrapper")[0].firstChild)) {
                                document.getElementsByClassName("encounters_wrapper")[0].removeChild(document.getElementsByClassName("encounters_wrapper")[0].firstChild);
                            }
                            
                            if((snapshot.val().encounters).length == 0) {
                                document.getElementById("encounters_title").style.display = "none";
                            } else {
                                
                                var encounters = JSON.parse(snapshot.val().encounters);
                                document.getElementById("encounters_title").style.display = "block";
                                
                                for(var i=0;i< encounters.length; i++) {
                                    var item = document.createElement("P");
                                    item.setAttribute("class", "encounters_item");
                                    
                                    var text = document.createTextNode(encounters[i].name + " on " + encounters[i].date);
                                    item.appendChild(text);
                                    document.getElementsByClassName("encounters_wrapper")[0].appendChild(item);
                                    
                                    document.getElementById("encounters_none").style.display = "none";
                                    
                                }
                            }
                            
                            document.getElementById("email").innerHTML = "<i class=\"material-icons\">mail_outline</i>&nbsp;" + snapshot.val().contactEmail;
                            
                            document.getElementById("phone").innerHTML = "<i class=\"material-icons\">phone</i>&nbsp;" + snapshot.val().contactPhone;
                            
                            document.getElementById("version").innerHTML = "Using version " + snapshot.val().version + "<br>Last updated on " + snapshot.val().lastUpdated;
                            
                        } else if(snapshot.val().type == "event") {
                            
                            document.getElementById("type").innerHTML = "Event";
                            document.getElementById("type").style.color = "#CC0000";
                            
                            document.getElementById("name").innerHTML = snapshot.val().name;
                                
                            document.getElementsByClassName("encounters")[0].style.display = "none";
                            document.getElementById("email").style.display = "none";
                            document.getElementById("phone").style.display = "none";
                            
                            document.getElementById("desc").style.display = "block";
                            document.getElementById("desc").innerHTML = snapshot.val().description;
                            
                            document.getElementById("version").innerHTML = "Last updated on " + snapshot.val().lastUpdated;
                            
                        }
                       $('#modal1').modal('open');
                });
            }
            
        </script>
        
        

    </body>
</html>